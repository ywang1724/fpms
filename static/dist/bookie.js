"use strict";!function(){function a(){return{pathname:window.location.pathname,appHost:window.location.host,userAgent:window.navigator.userAgent,platform:window.navigator.platform}}window.reportException=function(b,c,d,e,f){var g={};g.occurTime=new Date,g.type=b,g.userPlatformInfo=a(),g.message=c,g.errorurl=d,g.requrl=e,g.stack=f,console.log("sending......");var h=document.getElementById("feException"),i=h.src.split("/bookie.js/")[0],j=new Image(1,1);j.src=i+"/_fe.gif?"+encodeURIComponent(JSON.stringify(g))},window.onerror=function(a,b,c,d){var e="错误文件: "+b+"; 错误位置: 第"+c+"行，第"+d+"列.";return reportException(1,a,b,"",e),!0},function(a){var b=a.prototype.open,c=a.prototype.send;a.prototype.open=function(a,c,d,e,f){this._url=c,b.call(this,a,c,d,e,f)},a.prototype.send=function(a){function b(){if(4==e.readyState&&404==e.status){var a=document.getElementsByTagName("script"),b=a[a.length-1].src,c=e._url+"的请求"+e.statusText,f=e._url;reportException(2,c,b,f,"")}d&&d()}var d,e=this;this._url;this.noIntercept||(this.addEventListener?this.addEventListener("readystatechange",b,!1):(d=this.onreadystatechange,this.onreadystatechange=b)),c.call(this,a)}}(XMLHttpRequest),window.addEventListener("error",function(a,b){var c=["IMG","SCRIPT","LINK"],d={IMG:"图片",SCRIPT:"脚本文件",LINK:"样式文件"},e=a.target;if(-1!=c.indexOf(e.tagName)){var b="LINK"==e.tagName?e.href:e.src;console.log("地址为："+b+"的"+d[e.tagName]+"加载失败");var f=b.substring(b.lastIndexOf("/")+1)+"的"+d[e.tagName]+"加载失败",g=e.baseURI,h=b;return reportException(3,f,g,h,""),!0}},!0);var b=function(a){var b=a.createElement("script");b.type="text/javascript",b.async="true";var c=a.getElementById("feException");return b.src=c.src.replace("bookie","rookie"),function(){a.body.appendChild(b)}}(document),c=function(a){window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent("onload",a)};c(b)}(window);