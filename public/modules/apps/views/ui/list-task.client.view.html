<section data-ng-controller="UIController" ng-init="listTask()">
    <div class="pull-right" data-ng-show="(authentication.user)">
        <a title="添加" class="btn btn-primary btn-sm" data-ng-click="gotoAddTask();">
            <i class="glyphicon glyphicon-plus"></i>
        </a>
        <a title="返回" class="btn btn-primary btn-sm" data-ng-click="back();">
            <i class="glyphicon glyphicon-arrow-left"></i>
        </a>
    </div>
    <div class="page-header" style="margin-bottom: 20px;">
        <h2 >{{app.name}} - 页面监测</h2>
    </div>
    <div class="container">
        <div class="text-center text-danger">
            目前{{app.name}}的<span class="large">{{tasks.length}}</span>个页面正在进行主动监控。
        </div>
        <table datatable="" dt-options="dtPageOptions"  class="table table-striped table-bordered table-hover" data-ng-if="tasks.length">
            <thead>
            <tr >
                <th>任务URL</th>
                <th>任务详情</th>
                <th>上次任务运行时间</th>
                <th>创建时间</th>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="task in tasks">
                <td>{{task.url}}</td>
                <td><a ng-click="gotoTaskDetail(task)">任务详情</a></td>
                <td>{{task.lastRunTime | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                <td>{{task.createTime | date:'yyyy-MM-dd HH:mm:ss' }}</td>
            </tr>
            </tbody>
        </table>
    </div>
    </div>
</section>
